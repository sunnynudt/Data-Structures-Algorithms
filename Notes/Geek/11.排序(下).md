### 如何用快排思想在 O(n)内查找第 K 大元素？

冒泡排序、插入排序、选择排序，平均情况时间复杂度都是 O(n ^ 2)，比较高，适合小规模数据的排序。
归并排序和快速排序，时间复杂度为 O(nlogn)，适合较大规模的数据排序，更常用。

#### 1. 归并排序的原理

归并排序(Merge Sort)，其核心思想是，如果要排序一个数组，先把数组从中间分成前后两部分，然后对前后两部分分别排序，再将排序好的两部分合并在一起。

[归并排序分解图](/MindMap/Geek/11.归并排序分解图.jpg)

归并排序使用的是分治思想。分治算法一般都是用递归来实现的。分治是一种解决问题的处理思想，递归是一种编程技巧，两者并不冲突。

写递归代码的技巧就是，分析出递推公式，然后找到终止条件，最后将递推公式翻译成递归代码。

归并排序的地推公式：

```js
递推公式：
merge_sort(p...r) = merge(merge_sort(p...q), merge_sort(q+1...r))

终止条件：
p >= r 不用再继续分解
```

```js
// 伪代码
// 归并排序算法，A是数组，n表示数组大小
merge_sort(A, n) {
    merge_sort_c(A, 0, n-1)
}

// 递归调用函数
merge_sort_c(A, p, r) {
    // 递归终止条件
    if p >= r then return

    // 取p到r之间的中间位置q
    q = (p+r) / 2
    // 分治递归
    merge_sort_c(A, p, q)
    merge_sort_c(A, q+1, r)
    // 将A[p...q]和A[q+1...r]合并为A[p...r]
    merge(A[p...r], A[p...q], A[q+1...r])
}
```

merge(A[p...r], A[p...q], A[q+1...r])这个函数的作用是，将已经有序的A[p...q]和A[q+1...r]合并成一个有序的数组，并且放入A[p...r]。

